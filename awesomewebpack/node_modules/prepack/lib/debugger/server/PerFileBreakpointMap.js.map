{"version":3,"sources":["../../../src/debugger/server/PerFileBreakpointMap.js"],"names":["PerFileBreakpointMap","constructor","filePath","_filePath","_breakpoints","Map","addBreakpoint","line","column","temporary","enabled","breakpoint","key","_getKey","set","getBreakpoint","has","get","undefined","removeBreakpoint","delete","enableBreakpoint","disableBreakpoint"],"mappings":";;;;;;;AAWA;;AAEA;AACA;AACO,MAAMA,oBAAN,CAA2B;AAChCC,cAAYC,QAAZ,EAA8B;AAC5B,SAAKC,SAAL,GAAiBD,QAAjB;AACA,SAAKE,YAAL,GAAoB,IAAIC,GAAJ,EAApB;AACD;;AAGD;;;AAGAC,gBAAcC,IAAd,EAA4BC,SAAiB,CAA7C,EAAgDC,SAAhD,EAAqEC,OAArE,EAA8F;AAC5F,QAAIC,aAAa,2BAAe,KAAKR,SAApB,EAA+BI,IAA/B,EAAqCC,MAArC,EAA6CC,SAA7C,EAAwDC,OAAxD,CAAjB;AACA,QAAIE,MAAM,KAAKC,OAAL,CAAaN,IAAb,EAAmBC,MAAnB,CAAV;AACA,SAAKJ,YAAL,CAAkBU,GAAlB,CAAsBF,GAAtB,EAA2BD,UAA3B;AACD;;AAEDI,gBAAcR,IAAd,EAA4BC,SAAiB,CAA7C,EAAmE;AACjE;AACA,QAAIA,WAAW,CAAf,EAAkB;AAChB,UAAII,MAAM,KAAKC,OAAL,CAAaN,IAAb,EAAmBC,MAAnB,CAAV;AACA,UAAI,KAAKJ,YAAL,CAAkBY,GAAlB,CAAsBJ,GAAtB,CAAJ,EAAgC;AAC9B,eAAO,KAAKR,YAAL,CAAkBa,GAAlB,CAAsBL,GAAtB,CAAP;AACD,OAFD,MAEO;AACLA,cAAM,KAAKC,OAAL,CAAaN,IAAb,EAAmB,CAAnB,CAAN;AACA,YAAI,KAAKH,YAAL,CAAkBY,GAAlB,CAAsBJ,GAAtB,CAAJ,EAAgC;AAC9B,iBAAO,KAAKR,YAAL,CAAkBa,GAAlB,CAAsBL,GAAtB,CAAP;AACD;AACF;AACF,KAVD,MAUO;AACL,UAAIA,MAAM,KAAKC,OAAL,CAAaN,IAAb,EAAmB,CAAnB,CAAV;AACA,UAAI,KAAKH,YAAL,CAAkBY,GAAlB,CAAsBJ,GAAtB,CAAJ,EAAgC;AAC9B,eAAO,KAAKR,YAAL,CAAkBa,GAAlB,CAAsBL,GAAtB,CAAP;AACD;AACF;;AAED,WAAOM,SAAP;AACD;;AAEDC,mBAAiBZ,IAAjB,EAA+BC,SAAiB,CAAhD,EAAyD;AACvD,QAAII,MAAM,KAAKC,OAAL,CAAaN,IAAb,EAAmBC,MAAnB,CAAV;AACA,QAAI,KAAKJ,YAAL,CAAkBY,GAAlB,CAAsBJ,GAAtB,CAAJ,EAAgC;AAC9B,WAAKR,YAAL,CAAkBgB,MAAlB,CAAyBR,GAAzB;AACD;AACF;;AAEDS,mBAAiBd,IAAjB,EAA+BC,SAAiB,CAAhD,EAAyD;AACvD,QAAII,MAAM,KAAKC,OAAL,CAAaN,IAAb,EAAmBC,MAAnB,CAAV;AACA,QAAIG,aAAa,KAAKP,YAAL,CAAkBa,GAAlB,CAAsBL,GAAtB,CAAjB;AACA,QAAID,UAAJ,EAAgBA,WAAWD,OAAX,GAAqB,IAArB;AACjB;;AAEDY,oBAAkBf,IAAlB,EAAgCC,SAAiB,CAAjD,EAA0D;AACxD,QAAII,MAAM,KAAKC,OAAL,CAAaN,IAAb,EAAmBC,MAAnB,CAAV;AACA,QAAIG,aAAa,KAAKP,YAAL,CAAkBa,GAAlB,CAAsBL,GAAtB,CAAjB;AACA,QAAID,UAAJ,EAAgBA,WAAWD,OAAX,GAAqB,KAArB;AACjB;;AAEDG,UAAQN,IAAR,EAAsBC,MAAtB,EAA8C;AAC5C,WAAQ,GAAED,IAAK,IAAGC,MAAO,EAAzB;AACD;AA3D+B;QAArBR,oB,GAAAA,oB,EAfb;;;;;;;;;AASA","file":"PerFileBreakpointMap.js","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow strict */\n\nimport { Breakpoint } from \"./Breakpoint.js\";\n\n// Storage for all the breakpoints in one source file\n// Each source file will be associated with one PerFileBreakpointMap\nexport class PerFileBreakpointMap {\n  constructor(filePath: string) {\n    this._filePath = filePath;\n    this._breakpoints = new Map();\n  }\n  _filePath: string;\n\n  //map of line:column to Breakpoint objects\n  _breakpoints: Map<string, Breakpoint>;\n\n  addBreakpoint(line: number, column: number = 0, temporary?: boolean, enabled?: boolean): void {\n    let breakpoint = new Breakpoint(this._filePath, line, column, temporary, enabled);\n    let key = this._getKey(line, column);\n    this._breakpoints.set(key, breakpoint);\n  }\n\n  getBreakpoint(line: number, column: number = 0): void | Breakpoint {\n    //check for a column breakpoint first, then line breakpoint\n    if (column !== 0) {\n      let key = this._getKey(line, column);\n      if (this._breakpoints.has(key)) {\n        return this._breakpoints.get(key);\n      } else {\n        key = this._getKey(line, 0);\n        if (this._breakpoints.has(key)) {\n          return this._breakpoints.get(key);\n        }\n      }\n    } else {\n      let key = this._getKey(line, 0);\n      if (this._breakpoints.has(key)) {\n        return this._breakpoints.get(key);\n      }\n    }\n\n    return undefined;\n  }\n\n  removeBreakpoint(line: number, column: number = 0): void {\n    let key = this._getKey(line, column);\n    if (this._breakpoints.has(key)) {\n      this._breakpoints.delete(key);\n    }\n  }\n\n  enableBreakpoint(line: number, column: number = 0): void {\n    let key = this._getKey(line, column);\n    let breakpoint = this._breakpoints.get(key);\n    if (breakpoint) breakpoint.enabled = true;\n  }\n\n  disableBreakpoint(line: number, column: number = 0): void {\n    let key = this._getKey(line, column);\n    let breakpoint = this._breakpoints.get(key);\n    if (breakpoint) breakpoint.enabled = false;\n  }\n\n  _getKey(line: number, column: number): string {\n    return `${line}:${column}`;\n  }\n}\n"]}