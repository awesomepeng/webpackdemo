{"version":3,"sources":["../../../src/intrinsics/fb-www/react-mocks.js"],"names":["createMockReact","t","reactCode","reactAst","plugins","realm","reactRequireName","reactFactory","GetValue","$GlobalEnv","evaluate","currentOwner","react","intrinsics","ObjectPrototype","factory","$Call","undefined","reactValue","refuseSerialization","name","updatePrototype","context","type","config","children","null","ToObject","Array","isArray","length","array","ArrayCreate","i","CreateDataPropertyOrThrow","makeFinal","element","funcValue","defaultValue","consumerObject","providerObject","consumer","createTemporalFromBuildFunction","methodNode","defaultValueNode","callExpression","skipInvariant","isPure","values","Set","provider","consumerNode","memberExpression","identifier","funcVal","createRef","createRefNode","func","forwardedRef","forwardRefNode","funcNode","abstractHints","set"],"mappings":"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","file":"react-mocks.js","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\n\nimport type { Realm } from \"../../realm.js\";\nimport { parseExpression } from \"babylon\";\nimport { ValuesDomain } from \"../../domains/index.js\";\nimport {\n  AbstractObjectValue,\n  AbstractValue,\n  ECMAScriptSourceFunctionValue,\n  FunctionValue,\n  NullValue,\n  NumberValue,\n  ObjectValue,\n  Value,\n} from \"../../values/index.js\";\nimport { Environment } from \"../../singletons.js\";\nimport { createReactHintObject, getReactSymbol } from \"../../react/utils.js\";\nimport { cloneReactElement, createReactElement } from \"../../react/elements.js\";\nimport { Properties, Create, To } from \"../../singletons.js\";\nimport * as t from \"babel-types\";\nimport invariant from \"../../invariant\";\nimport { updateIntrinsicNames, addMockFunctionToObject } from \"./utils.js\";\n\n// most of the code here was taken from https://github.com/facebook/react/blob/master/packages/react/src/ReactElement.js\nlet reactCode = `\n  function createReact(REACT_ELEMENT_TYPE, REACT_FRAGMENT_TYPE, REACT_PORTAL_TYPE, ReactCurrentOwner, create) {\n    function makeEmptyFunction(arg) {\n      return function() {\n        return arg;\n      };\n    }\n    var emptyFunction = function() {};\n    \n    emptyFunction.thatReturns = makeEmptyFunction;\n    emptyFunction.thatReturnsFalse = makeEmptyFunction(false);\n    emptyFunction.thatReturnsTrue = makeEmptyFunction(true);\n    emptyFunction.thatReturnsNull = makeEmptyFunction(null);\n    emptyFunction.thatReturnsThis = function() { return this; };\n    emptyFunction.thatReturnsArgument = function(arg) { return arg; };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var RESERVED_PROPS = {\n      key: true,\n      ref: true,\n      __self: true,\n      __source: true,\n    };\n\n    function hasValidRef(config) {\n      return config.ref !== undefined;\n    }\n    \n    function hasValidKey(config) {\n      return config.key !== undefined;\n    }\n\n    function Component(props, context) {\n      this.props = props;\n      this.context = context;\n      this.refs = {};\n      this.setState = function () {}; // NO-OP\n      this.setState.__PREPACK_MOCK__ = true;\n    }\n    \n    Component.prototype.isReactComponent = {};\n\n    function PureComponent(props, context) {\n      this.props = props;\n      this.context = context;\n      this.refs = {};\n      this.setState = function () {}; // NO-OP\n      this.setState.__PREPACK_MOCK__ = true;\n    }\n\n    PureComponent.prototype.isReactComponent = {};\n    PureComponent.prototype.isPureReactComponent = true;\n\n    var userProvidedKeyEscapeRegex = /\\/+/g;\n\n    function escapeUserProvidedKey(text) {\n      return ('' + text).replace(userProvidedKeyEscapeRegex, '$&/');\n    }\n\n    function escape(key) {\n      const escapeRegex = /[=:]/g;\n      const escaperLookup = {\n        '=': '=0',\n        ':': '=2',\n      };\n      const escapedString = ('' + key).replace(escapeRegex, function(match) {\n        return escaperLookup[match];\n      });\n    \n      return '$' + escapedString;\n    }\n\n    var SEPARATOR = '.';\n    var SUBSEPARATOR = ':';\n    var POOL_SIZE = 10;\n    var traverseContextPool = [];\n    function getPooledTraverseContext(\n      mapResult,\n      keyPrefix,\n      mapFunction,\n      mapContext,\n    ) {\n      if (traverseContextPool.length) {\n        const traverseContext = traverseContextPool.pop();\n        traverseContext.result = mapResult;\n        traverseContext.keyPrefix = keyPrefix;\n        traverseContext.func = mapFunction;\n        traverseContext.context = mapContext;\n        traverseContext.count = 0;\n        return traverseContext;\n      } else {\n        return {\n          result: mapResult,\n          keyPrefix: keyPrefix,\n          func: mapFunction,\n          context: mapContext,\n          count: 0,\n        };\n      }\n    }\n\n    function releaseTraverseContext(traverseContext) {\n      traverseContext.result = null;\n      traverseContext.keyPrefix = null;\n      traverseContext.func = null;\n      traverseContext.context = null;\n      traverseContext.count = 0;\n      if (traverseContextPool.length < POOL_SIZE) {\n        traverseContextPool.push(traverseContext);\n      }\n    }\n\n    function traverseAllChildren(children, callback, traverseContext) {\n      if (children == null) {\n        return 0;\n      }\n    \n      return traverseAllChildrenImpl(children, '', callback, traverseContext);\n    }\n\n    function getComponentKey(component, index) {\n      // Do some typechecking here since we call this blindly. We want to ensure\n      // that we don't block potential future ES APIs.\n      if (\n        typeof component === 'object' &&\n        component !== null &&\n        component.key != null\n      ) {\n        // Explicit key\n        return escape(component.key);\n      }\n      // Implicit key determined by the index in the set\n      return index.toString(36);\n    }\n\n    function traverseAllChildrenImpl(\n      children,\n      nameSoFar,\n      callback,\n      traverseContext,\n    ) {\n      const type = typeof children;\n    \n      if (type === 'undefined' || type === 'boolean') {\n        // All of the above are perceived as null.\n        children = null;\n      }\n    \n      let invokeCallback = false;\n    \n      if (children === null) {\n        invokeCallback = true;\n      } else {\n        switch (type) {\n          case 'string':\n          case 'number':\n            invokeCallback = true;\n            break;\n          case 'object':\n            switch (children.$$typeof) {\n              case REACT_ELEMENT_TYPE:\n              case REACT_PORTAL_TYPE:\n                invokeCallback = true;\n            }\n        }\n      }\n    \n      if (invokeCallback) {\n        callback(\n          traverseContext,\n          children,\n          // If it's the only child, treat the name as if it was wrapped in an array\n          // so that it's consistent if the number of children grows.\n          nameSoFar === '' ? SEPARATOR + getComponentKey(children, 0) : nameSoFar,\n        );\n        return 1;\n      }\n    \n      let child;\n      let nextName;\n      let subtreeCount = 0; // Count of children found in the current subtree.\n      const nextNamePrefix =\n        nameSoFar === '' ? SEPARATOR : nameSoFar + SUBSEPARATOR;\n    \n      if (Array.isArray(children)) {\n        for (let i = 0; i < children.length; i++) {\n          child = children[i];\n          nextName = nextNamePrefix + getComponentKey(child, i);\n          subtreeCount += traverseAllChildrenImpl(\n            child,\n            nextName,\n            callback,\n            traverseContext,\n          );\n        }\n      } else {\n        const iteratorFn = getIteratorFn(children);\n        if (typeof iteratorFn === 'function') {    \n          var iterator = iteratorFn.call(children);\n          let step;\n          let ii = 0;\n          while (!(step = iterator.next()).done) {\n            child = step.value;\n            nextName = nextNamePrefix + getComponentKey(child, ii++);\n            subtreeCount += traverseAllChildrenImpl(\n              child,\n              nextName,\n              callback,\n              traverseContext,\n            );\n          }\n        } else if (type === 'object') {\n          let addendum = '';\n          var childrenString = '' + children;\n        }\n      }\n    \n      return subtreeCount;\n    }\n\n    function mapIntoWithKeyPrefixInternal(children, array, prefix, func, context) {\n      var escapedPrefix = '';\n      if (prefix != null) {\n        escapedPrefix = escapeUserProvidedKey(prefix) + '/';\n      }\n      const traverseContext = getPooledTraverseContext(\n        array,\n        escapedPrefix,\n        func,\n        context,\n      );\n      traverseAllChildren(children, mapSingleChildIntoContext, traverseContext);\n      releaseTraverseContext(traverseContext);\n    }\n\n    function forEachSingleChild(bookKeeping, child, name) {\n      const {func, context} = bookKeeping;\n      func.call(context, child, bookKeeping.count++);\n    }\n\n    function forEachChildren(children, forEachFunc, forEachContext) {\n      if (children == null) {\n        return children;\n      }\n      var traverseContext = getPooledTraverseContext(\n        null,\n        null,\n        forEachFunc,\n        forEachContext,\n      );\n      traverseAllChildren(children, forEachSingleChild, traverseContext);\n      releaseTraverseContext(traverseContext);\n    }\n\n    function mapChildren(children, func, context) {\n      if (children == null) {\n        return children;\n      }\n      var result = [];\n      mapIntoWithKeyPrefixInternal(children, result, null, func, context);\n      return result;\n    }\n\n    function countChildren(children) {\n      return traverseAllChildren(children, emptyFunction.thatReturnsNull, null);\n    }\n\n    function onlyChild(children) {\n      return children;\n    }\n\n    function toArray(children) {\n      var result = [];\n      mapIntoWithKeyPrefixInternal(\n        children,\n        result,\n        null,\n        emptyFunction.thatReturnsArgument,\n      );\n      return result;\n    }\n\n    function isValidElement(object) {\n      return (\n        typeof object === 'object' &&\n        object !== null &&\n        object.$$typeof === REACT_ELEMENT_TYPE\n      );\n    }\n\n    function shim() {\n\n    }\n    shim.isRequired = shim;\n\n    function getShim() {\n      return shim;\n    };\n\n    var ReactPropTypes = {\n      array: shim,\n      bool: shim,\n      func: shim,\n      number: shim,\n      object: shim,\n      string: shim,\n      symbol: shim,\n  \n      any: shim,\n      arrayOf: getShim,\n      element: shim,\n      instanceOf: getShim,\n      node: shim,\n      objectOf: getShim,\n      oneOf: getShim,\n      oneOfType: getShim,\n      shape: getShim,\n      exact: getShim\n    };\n\n    ReactPropTypes.checkPropTypes = shim;\n    ReactPropTypes.PropTypes = ReactPropTypes;\n\n    return {\n      Children: {\n        forEach: forEachChildren,\n        map: mapChildren,\n        count: countChildren,\n        only: onlyChild,\n        toArray,\n      },\n      Component,\n      PureComponent,\n      Fragment: REACT_FRAGMENT_TYPE,\n      isValidElement,\n      version: \"16.2.0\",\n      PropTypes: ReactPropTypes,\n    };\n  }\n`;\nlet reactAst = parseExpression(reactCode, { plugins: [\"flow\"] });\n\nexport function createMockReact(realm: Realm, reactRequireName: string): ObjectValue {\n  let reactFactory = Environment.GetValue(realm, realm.$GlobalEnv.evaluate(reactAst, false));\n  invariant(reactFactory instanceof ECMAScriptSourceFunctionValue);\n\n  let currentOwner = (realm.react.currentOwner = new ObjectValue(\n    realm,\n    realm.intrinsics.ObjectPrototype,\n    \"currentOwner\"\n  ));\n  // this is to get around Flow getting confused\n  let factory = reactFactory.$Call;\n  invariant(factory !== undefined);\n\n  let reactValue = factory(realm.intrinsics.undefined, [\n    getReactSymbol(\"react.element\", realm),\n    getReactSymbol(\"react.fragment\", realm),\n    getReactSymbol(\"react.portal\", realm),\n    currentOwner,\n  ]);\n  invariant(reactValue instanceof ObjectValue);\n  reactValue.refuseSerialization = true;\n\n  // update existing properties with the new intrinsic mock values\n  updateIntrinsicNames(realm, reactValue, reactRequireName, [\n    \"PropTypes\",\n    \"Children\",\n    \"isValidElement\",\n    { name: \"Component\", updatePrototype: true },\n    { name: \"PureComponent\", updatePrototype: true },\n  ]);\n\n  addMockFunctionToObject(\n    realm,\n    reactValue,\n    reactRequireName,\n    \"createElement\",\n    (context, [type, config, ...children]) => {\n      invariant(type instanceof Value);\n      // if config is undefined/null, use an empy object\n      if (config === realm.intrinsics.undefined || config === realm.intrinsics.null || config === undefined) {\n        config = new ObjectValue(realm, realm.intrinsics.ObjectPrototype);\n      }\n      if (config instanceof AbstractValue && !(config instanceof AbstractObjectValue)) {\n        config = To.ToObject(realm, config);\n      }\n      invariant(config instanceof ObjectValue || config instanceof AbstractObjectValue);\n\n      if (Array.isArray(children)) {\n        if (children.length === 0) {\n          children = undefined;\n        } else if (children.length === 1) {\n          children = children[0];\n        } else {\n          let array = Create.ArrayCreate(realm, 0);\n          let length = children.length;\n\n          for (let i = 0; i < length; i++) {\n            Create.CreateDataPropertyOrThrow(realm, array, \"\" + i, children[i]);\n          }\n          children = array;\n          children.makeFinal();\n        }\n      }\n      return createReactElement(realm, type, config, children);\n    }\n  );\n\n  addMockFunctionToObject(\n    realm,\n    reactValue,\n    reactRequireName,\n    \"cloneElement\",\n    (context, [element, config, ...children]) => {\n      invariant(element instanceof ObjectValue);\n      // if config is undefined/null, use an empy object\n      if (config === realm.intrinsics.undefined || config === realm.intrinsics.null || config === undefined) {\n        config = realm.intrinsics.null;\n      }\n      if (config instanceof AbstractValue && !(config instanceof AbstractObjectValue)) {\n        config = To.ToObject(realm, config);\n      }\n      invariant(config instanceof ObjectValue || config instanceof AbstractObjectValue || config instanceof NullValue);\n\n      if (Array.isArray(children)) {\n        if (children.length === 0) {\n          children = undefined;\n        } else if (children.length === 1) {\n          children = children[0];\n        } else {\n          let array = Create.ArrayCreate(realm, 0);\n          let length = children.length;\n\n          for (let i = 0; i < length; i++) {\n            Create.CreateDataPropertyOrThrow(realm, array, \"\" + i, children[i]);\n          }\n          children = array;\n          children.makeFinal();\n        }\n      }\n      return cloneReactElement(realm, element, config, children);\n    }\n  );\n\n  addMockFunctionToObject(\n    realm,\n    reactValue,\n    reactRequireName,\n    \"createContext\",\n    (funcValue, [defaultValue = realm.intrinsics.undefined]) => {\n      invariant(defaultValue instanceof Value);\n      let consumerObject = new ObjectValue(realm, realm.intrinsics.ObjectPrototype);\n      let providerObject = new ObjectValue(realm, realm.intrinsics.ObjectPrototype);\n      let consumer = AbstractValue.createTemporalFromBuildFunction(\n        realm,\n        ObjectValue,\n        [funcValue, defaultValue],\n        ([methodNode, defaultValueNode]) => t.callExpression(methodNode, [defaultValueNode]),\n        { skipInvariant: true, isPure: true }\n      );\n      invariant(consumer instanceof AbstractObjectValue);\n      consumer.values = new ValuesDomain(new Set([consumerObject]));\n\n      let provider = AbstractValue.createTemporalFromBuildFunction(\n        realm,\n        ObjectValue,\n        [consumer],\n        ([consumerNode]) => t.memberExpression(consumerNode, t.identifier(\"Provider\")),\n        { skipInvariant: true, isPure: true }\n      );\n      invariant(provider instanceof AbstractObjectValue);\n      provider.values = new ValuesDomain(new Set([providerObject]));\n\n      Properties.Set(realm, consumerObject, \"$$typeof\", getReactSymbol(\"react.context\", realm), true);\n      Properties.Set(realm, consumerObject, \"currentValue\", defaultValue, true);\n      Properties.Set(realm, consumerObject, \"defaultValue\", defaultValue, true);\n      Properties.Set(realm, consumerObject, \"changedBits\", new NumberValue(realm, 0), true);\n      Properties.Set(realm, consumerObject, \"Consumer\", consumer, true);\n\n      Properties.Set(realm, providerObject, \"$$typeof\", getReactSymbol(\"react.provider\", realm), true);\n      Properties.Set(realm, providerObject, \"context\", consumer, true);\n\n      Properties.Set(realm, consumerObject, \"Provider\", provider, true);\n      return consumer;\n    }\n  );\n\n  addMockFunctionToObject(realm, reactValue, reactRequireName, \"createRef\", funcVal => {\n    let createRef = AbstractValue.createTemporalFromBuildFunction(\n      realm,\n      FunctionValue,\n      [funcVal],\n      ([createRefNode]) => {\n        return t.callExpression(createRefNode, []);\n      },\n      { skipInvariant: true, isPure: true }\n    );\n    invariant(createRef instanceof AbstractObjectValue);\n    return createRef;\n  });\n\n  addMockFunctionToObject(realm, reactValue, reactRequireName, \"forwardRef\", (funcVal, [func]) => {\n    let forwardedRef = AbstractValue.createTemporalFromBuildFunction(\n      realm,\n      FunctionValue,\n      [funcVal, func],\n      ([forwardRefNode, funcNode]) => {\n        return t.callExpression(forwardRefNode, [funcNode]);\n      },\n      { skipInvariant: true, isPure: true }\n    );\n    invariant(forwardedRef instanceof AbstractObjectValue);\n    realm.react.abstractHints.set(\n      forwardedRef,\n      createReactHintObject(reactValue, \"forwardRef\", [func], realm.intrinsics.undefined)\n    );\n    return forwardedRef;\n  });\n\n  reactValue.refuseSerialization = false;\n  reactValue.makeFinal();\n  return reactValue;\n}\n"]}