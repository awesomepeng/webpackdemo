{"version":3,"sources":["../../src/methods/abstract.js"],"names":["SplitMatch","RequireObjectCoercible","HasSameType","AbstractRelationalComparison","AbstractEqualityComparison","StrictEqualityComparison","StrictEqualityComparisonPartial","SameValueZero","SameValueZeroPartial","SameValue","SameValuePartial","SameValueNonNumber","SamePropertyKey","Add","InstanceofOperator","OrdinaryHasInstance","Type","SymbolDescriptiveString","UpdateEmpty","URIReserved","URIAlpha","DecimalDigit","URIMark","URIUnescaped","realm","S","q","R","r","length","s","i","arg","argLoc","mightBeNull","mightBeUndefined","isInPureScope","error","describe","handleError","throwIfNotConcrete","createErrorThrowCompletion","intrinsics","TypeError","x","y","xType","getType","yType","LeftFirst","op","px","py","ToPrimitiveOrAbstract","res","createFromBinaryOp","value","startsWith","false","true","k","charCodeAt","m","n","nx","ToNumber","ny","isNaN","undefined","Object","is","strictResult","a","b","subtract","NaN","anum","bnum","createFromNumberValue","O","C","mightBeObject","instOfHandler","SymbolHasInstance","ToBooleanPartial","BC","$BoundTargetFunction","P","$GetPrototypeOf","val","mightNotBeObject","reportIntrospectionError","sym","desc","$Description","throwIfNotConcreteString","completionRecord"],"mappings":"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","file":"abstract.js","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\n\nimport type { Realm } from \"../realm.js\";\nimport type { PropertyKeyValue } from \"../types.js\";\nimport { CompilerDiagnostic, FatalError } from \"../errors.js\";\nimport {\n  BoundFunctionValue,\n  EmptyValue,\n  NumberValue,\n  IntegralValue,\n  SymbolValue,\n  StringValue,\n  NullValue,\n  ObjectValue,\n  Value,\n  BooleanValue,\n  UndefinedValue,\n  ConcreteValue,\n  AbstractValue,\n} from \"../values/index.js\";\nimport { Call } from \"./call.js\";\nimport { IsCallable } from \"./is.js\";\nimport { Completion, ReturnCompletion, ThrowCompletion } from \"../completions.js\";\nimport { GetMethod, Get } from \"./get.js\";\nimport { HasCompatibleType } from \"./has.js\";\nimport { To } from \"../singletons.js\";\nimport type { BabelNodeSourceLocation, BabelBinaryOperator } from \"babel-types\";\nimport invariant from \"../invariant.js\";\n\nexport const URIReserved = \";/?:@&=+$,\";\nexport const URIAlpha = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nexport const DecimalDigit = \"0123456789\";\nexport const URIMark = \"-_.!~*'()\";\nexport const URIUnescaped = URIAlpha + DecimalDigit + URIMark;\n\n// ECMA262 21.1.3.17.1\nexport function SplitMatch(realm: Realm, S: string, q: number, R: string): false | number {\n  // 1. Assert: Type(R) is String.\n  invariant(typeof R === \"string\", \"expected a string\");\n\n  // 2. Let r be the number of code units in R.\n  let r = R.length;\n\n  // 3. Let s be the number of code units in S.\n  let s = S.length;\n\n  // 4. If q+r > s, return false.\n  if (q + r > s) return false;\n\n  // 5. If there exists an integer i between 0 (inclusive) and r (exclusive) such that the code unit at index\n  //    q+i of S is different from the code unit at index i of R, return false.\n  for (let i = 0; i < r; i++) {\n    if (S[q + i] !== R[i]) {\n      return false;\n    }\n  }\n\n  // 6. Return q+r.\n  return q + r;\n}\n\n// ECMA262 7.2.1\nexport function RequireObjectCoercible(\n  realm: Realm,\n  arg: Value,\n  argLoc?: ?BabelNodeSourceLocation\n): AbstractValue | ObjectValue | BooleanValue | StringValue | SymbolValue | NumberValue {\n  if (arg instanceof AbstractValue && (arg.mightBeNull() || arg.mightBeUndefined())) {\n    if (realm.isInPureScope()) {\n      // In a pure function it is ok to throw if this happens to be null or undefined.\n      return arg;\n    }\n    if (argLoc) {\n      let error = new CompilerDiagnostic(\n        `member expression object ${AbstractValue.describe(arg)} is unknown`,\n        argLoc,\n        \"PP0012\",\n        \"FatalError\"\n      );\n      realm.handleError(error);\n      throw new FatalError();\n    }\n    arg.throwIfNotConcrete();\n  }\n  if (arg instanceof NullValue || arg instanceof UndefinedValue) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.TypeError, \"null or undefined\");\n  } else {\n    return (arg: any);\n  }\n}\n\nexport function HasSameType(x: ConcreteValue, y: ConcreteValue): boolean {\n  const xType = x.getType();\n  const yType = y.getType();\n  return (\n    xType === yType ||\n    ((xType === IntegralValue || xType === NumberValue) && (yType === IntegralValue || yType === NumberValue))\n  );\n}\n\n// ECMA262 7.2.12 Abstract Relational Comparison\nexport function AbstractRelationalComparison(\n  realm: Realm,\n  x: ConcreteValue,\n  y: ConcreteValue,\n  LeftFirst: boolean,\n  op: BabelBinaryOperator\n): BooleanValue | UndefinedValue | AbstractValue {\n  let px, py;\n\n  // 1. If the LeftFirst flag is true, then\n  if (LeftFirst) {\n    // a. Let px be ? ToPrimitive(x, hint Number).\n    px = To.ToPrimitiveOrAbstract(realm, x, \"number\");\n\n    // b. Let py be ? ToPrimitive(y, hint Number).\n    py = To.ToPrimitiveOrAbstract(realm, y, \"number\");\n  } else {\n    // 2. Else the order of evaluation needs to be reversed to preserve left to right evaluation\n    // a. Let py be ? ToPrimitive(y, hint Number).\n    py = To.ToPrimitiveOrAbstract(realm, y, \"number\");\n\n    // b. Let px be ? ToPrimitive(x, hint Number).\n    px = To.ToPrimitiveOrAbstract(realm, x, \"number\");\n  }\n\n  if (px instanceof AbstractValue || py instanceof AbstractValue) {\n    let res;\n    if (LeftFirst) {\n      res = AbstractValue.createFromBinaryOp(realm, op, px, py);\n    } else {\n      res = AbstractValue.createFromBinaryOp(realm, op, py, px);\n    }\n    invariant(res instanceof BooleanValue || res instanceof UndefinedValue || res instanceof AbstractValue);\n    return res;\n  }\n\n  // 3. If both px and py are Strings, then\n  if (px instanceof StringValue && py instanceof StringValue) {\n    // a. If py is a prefix of px, return false. (A String value p is a prefix of String value q if q can be the result of concatenating p and some other String r. Note that any String is a prefix of itself, because r may be the empty String.)\n    if (px.value.startsWith(py.value)) return realm.intrinsics.false;\n\n    // b. If px is a prefix of py, return true.\n    if (py.value.startsWith(px.value)) return realm.intrinsics.true;\n\n    // c. Let k be the smallest nonnegative integer such that the code unit at index k within px is different from the code unit at index k within py. (There must be such a k, for neither String is a prefix of the other.)\n    let k = 0;\n    while (px.value.charCodeAt(k) === py.value.charCodeAt(k)) {\n      k += 1;\n    }\n\n    // d. Let m be the integer that is the code unit value at index k within px.\n    let m = px.value.charCodeAt(k);\n\n    // e. Let n be the integer that is the code unit value at index k within py.\n    let n = py.value.charCodeAt(k);\n\n    // f. If m < n, return true. Otherwise, return false.\n    return m < n ? realm.intrinsics.true : realm.intrinsics.false;\n  } else {\n    // 4. Else,\n    // a. Let nx be ? ToNumber(px). Because px and py are primitive values evaluation order is not important.\n    let nx = To.ToNumber(realm, px);\n\n    // b. Let ny be ? ToNumber(py).\n    let ny = To.ToNumber(realm, py);\n\n    // c. If nx is NaN, return undefined.\n    if (isNaN(nx)) return realm.intrinsics.undefined;\n\n    // d. If ny is NaN, return undefined.\n    if (isNaN(ny)) return realm.intrinsics.undefined;\n\n    // e. If nx and ny are the same Number value, return false.\n    if (Object.is(nx, ny)) {\n      return realm.intrinsics.false;\n    }\n\n    // f. If nx is +0 and ny is -0, return false.\n    if (Object.is(nx, +0) && Object.is(ny, -0)) {\n      return realm.intrinsics.false;\n    }\n\n    // g. If nx is -0 and ny is +0, return false.\n    if (Object.is(nx, -0) && Object.is(ny, +0)) {\n      return realm.intrinsics.false;\n    }\n\n    // h. If nx is +∞, return false.\n    // i. If ny is +∞, return true.\n    // j. If ny is -∞, return false.\n    // k. If nx is -∞, return true.\n\n    // i. If the mathematical value of nx is less than the mathematical value of ny —note that these\n    //    mathematical values are both finite and not both zero—return true. Otherwise, return false.\n    if (nx < ny) {\n      return realm.intrinsics.true;\n    } else {\n      return realm.intrinsics.false;\n    }\n  }\n}\n\n// ECMA262 7.2.13\nexport function AbstractEqualityComparison(\n  realm: Realm,\n  x: ConcreteValue,\n  y: ConcreteValue,\n  op: BabelBinaryOperator\n): BooleanValue | AbstractValue {\n  // 1. If Type(x) is the same as Type(y), then\n  if (HasSameType(x, y)) {\n    // a. Return the result of performing Strict Equality Comparison x === y.\n    const strictResult = StrictEqualityComparison(realm, x, y);\n    return new BooleanValue(realm, op === \"==\" ? strictResult : !strictResult);\n  }\n\n  // 2. If x is null and y is undefined, return true.\n  if (x instanceof NullValue && y instanceof UndefinedValue) {\n    return new BooleanValue(realm, op === \"==\");\n  }\n\n  // 3. If x is undefined and y is null, return true.\n  if (x instanceof UndefinedValue && y instanceof NullValue) {\n    return new BooleanValue(realm, op === \"==\");\n  }\n\n  // 4. If Type(x) is Number and Type(y) is String, return the result of the comparison x == ToNumber(y).\n  if (x instanceof NumberValue && y instanceof StringValue) {\n    return AbstractEqualityComparison(realm, x, new NumberValue(realm, To.ToNumber(realm, y)), op);\n  }\n\n  // 5. If Type(x) is String and Type(y) is Number, return the result of the comparison ToNumber(x) == y.\n  if (x instanceof StringValue && y instanceof NumberValue) {\n    return AbstractEqualityComparison(realm, new NumberValue(realm, To.ToNumber(realm, x)), y, op);\n  }\n\n  // 6. If Type(x) is Boolean, return the result of the comparison ToNumber(x) == y.\n  if (x instanceof BooleanValue) {\n    return AbstractEqualityComparison(realm, new NumberValue(realm, To.ToNumber(realm, x)), y, op);\n  }\n\n  // 7. If Type(y) is Boolean, return the result of the comparison x == ToNumber(y).\n  if (y instanceof BooleanValue) {\n    return AbstractEqualityComparison(realm, x, new NumberValue(realm, To.ToNumber(realm, y)), op);\n  }\n\n  // 8. If Type(x) is either String, Number, or Symbol and Type(y) is Object, return the result of the comparison x == ToPrimitive(y).\n  if ((x instanceof StringValue || x instanceof NumberValue || x instanceof SymbolValue) && y instanceof ObjectValue) {\n    const py = To.ToPrimitiveOrAbstract(realm, y);\n    if (py instanceof AbstractValue) {\n      let res = AbstractValue.createFromBinaryOp(realm, \"==\", x, py);\n      invariant(res instanceof BooleanValue || res instanceof AbstractValue);\n      return res;\n    }\n    return AbstractEqualityComparison(realm, x, py, op);\n  }\n\n  // 9. If Type(x) is Object and Type(y) is either String, Number, or Symbol, return the result of the comparison ToPrimitive(x) == y.\n  if (x instanceof ObjectValue && (y instanceof StringValue || y instanceof NumberValue || y instanceof SymbolValue)) {\n    const px = To.ToPrimitiveOrAbstract(realm, x);\n    if (px instanceof AbstractValue) {\n      let res = AbstractValue.createFromBinaryOp(realm, \"==\", px, y);\n      invariant(res instanceof BooleanValue || res instanceof AbstractValue);\n      return res;\n    }\n    return AbstractEqualityComparison(realm, px, y, op);\n  }\n\n  // 10. Return false.\n  return new BooleanValue(realm, op !== \"==\");\n}\n\n// ECMA262 7.2.14 Strict Equality Comparison\nexport function StrictEqualityComparison(realm: Realm, x: ConcreteValue, y: ConcreteValue): boolean {\n  // 1. If Type(x) is different from Type(y), return false.\n  if (!HasSameType(x, y)) {\n    return false;\n  }\n\n  // 2. If Type(x) is Number, then\n  if (x instanceof NumberValue && y instanceof NumberValue) {\n    // a. If x is NaN, return false.\n    if (isNaN(x.value)) return false;\n\n    // b. If y is NaN, return false.\n    if (isNaN(y.value)) return false;\n\n    // c. If x is the same Number value as y, return true.\n    // d. If x is +0 and y is -0, return true. (handled by c)\n    // e. If x is -0 and y is +0, return true. (handled by c)\n    if (x.value === y.value) return true;\n\n    // f. Return false.\n    return false;\n  }\n\n  // 3. Return SameValueNonNumber(x, y).\n  return SameValueNonNumber(realm, x, y);\n}\n\nexport function StrictEqualityComparisonPartial(realm: Realm, x: Value, y: Value): boolean {\n  return StrictEqualityComparison(realm, x.throwIfNotConcrete(), y.throwIfNotConcrete());\n}\n\n// ECMA262 7.2.10\nexport function SameValueZero(realm: Realm, x: ConcreteValue, y: ConcreteValue): boolean {\n  // 1. If Type(x) is different from Type(y), return false.\n  if (!HasSameType(x, y)) {\n    return false;\n  }\n\n  // 2. If Type(x) is Number, then\n  if (x instanceof NumberValue) {\n    invariant(y instanceof NumberValue);\n\n    // a. If x is NaN and y is NaN, return true.\n    if (isNaN(x.value) && isNaN(y.value)) return true;\n\n    // b. If x is +0 and y is -0, return true.\n    if (Object.is(x.value, +0) && Object.is(y.value, -0)) return true;\n\n    // c. If x is -0 and y is +0, return true.\n    if (Object.is(x.value, -0) && Object.is(y.value, +0)) return true;\n\n    // d. If x is the same Number value as y, return true.\n    if (x.value === y.value) return true;\n\n    // e. Return false.\n    return false;\n  }\n\n  // 3. Return SameValueNonNumber(x, y).\n  return SameValueNonNumber(realm, x, y);\n}\n\nexport function SameValueZeroPartial(realm: Realm, x: Value, y: Value): boolean {\n  return SameValueZero(realm, x.throwIfNotConcrete(), y.throwIfNotConcrete());\n}\n\n// ECMA262 7.2.9\nexport function SameValue(realm: Realm, x: ConcreteValue, y: ConcreteValue): boolean {\n  // 1. If Type(x) is different from Type(y), return false.\n  if (!HasSameType(x, y)) {\n    return false;\n  }\n\n  // 2. If Type(x) is Number, then\n  if (x instanceof NumberValue && y instanceof NumberValue) {\n    // a. If x is NaN and y is NaN, return true.\n    if (isNaN(x.value) && isNaN(y.value)) return true;\n\n    // b. If x is +0 and y is -0, return false.\n    if (Object.is(x.value, +0) && Object.is(y.value, -0)) return false;\n\n    // c. If x is -0 and y is +0, return false.\n    if (Object.is(x.value, -0) && Object.is(y.value, +0)) return false;\n\n    // d. If x is the same Number value as y, return true.\n    if (x.value === y.value) return true;\n\n    // e. Return false.\n    return false;\n  }\n\n  // 3. Return SameValueNonNumber(x, y).\n  return SameValueNonNumber(realm, x, y);\n}\n\nexport function SameValuePartial(realm: Realm, x: Value, y: Value): boolean {\n  return SameValue(realm, x.throwIfNotConcrete(), y.throwIfNotConcrete());\n}\n\n// ECMA262 7.2.11\nexport function SameValueNonNumber(realm: Realm, x: ConcreteValue, y: ConcreteValue): boolean {\n  // 1. Assert: Type(x) is not Number.\n  invariant(!(x instanceof NumberValue), \"numbers not allowed\");\n\n  // 2. Assert: Type(x) is the same as Type(y).\n  invariant(x.getType() === y.getType(), \"must be same type\");\n\n  // 3. If Type(x) is Undefined, return true.\n  if (x instanceof UndefinedValue) return true;\n\n  // 4. If Type(x) is Null, return true.\n  if (x instanceof NullValue) return true;\n\n  // 5. If Type(x) is String, then\n  if (x instanceof StringValue && y instanceof StringValue) {\n    // a. If x and y are exactly the same sequence of code units (same length and same code units at corresponding indices), return true; otherwise, return false.\n    return x.value === y.value;\n  }\n\n  // 6. If Type(x) is Boolean, then\n  if (x instanceof BooleanValue && y instanceof BooleanValue) {\n    // a. If x and y are both true or both false, return true; otherwise, return false.\n    return x.value === y.value;\n  }\n\n  // 7. If Type(x) is Symbol, then\n  if (x instanceof SymbolValue) {\n    // a. If x and y are both the same Symbol value, return true; otherwise, return false.\n    return x === y;\n  }\n\n  // 8. Return true if x and y are the same Object value. Otherwise, return false.\n  return x === y;\n}\n\n// Checks if two property keys are identical.\nexport function SamePropertyKey(realm: Realm, x: PropertyKeyValue, y: PropertyKeyValue): boolean {\n  if (typeof x === \"string\" && typeof y === \"string\") {\n    return x === y;\n  }\n  if (x instanceof StringValue && y instanceof StringValue) {\n    return x.value === y.value;\n  }\n  if (x instanceof SymbolValue && y instanceof SymbolValue) {\n    return x === y;\n  }\n  return false;\n}\n\n// ECMA262 12.8.5 Applying the Additive Operators to Numbers\nexport function Add(realm: Realm, a: number, b: number, subtract?: boolean = false): NumberValue {\n  // If either operand is NaN, the result is NaN.\n  if (isNaN(a) || isNaN(b)) {\n    return realm.intrinsics.NaN;\n  }\n\n  // The sum of two infinities of opposite sign is NaN.\n  // The sum of two infinities of the same sign is the infinity of that sign.\n  // The sum of an infinity and a finite value is equal to the infinite operand.\n  // The sum of two negative zeroes is -0. The sum of two positive zeroes, or of two zeroes of opposite sign, is +0.\n  // The sum of a zero and a nonzero finite value is equal to the nonzero operand.\n  // The sum of two nonzero finite values of the same magnitude and opposite sign is +0.\n\n  let anum = a;\n  let bnum = b;\n\n  // The - operator performs subtraction when applied to two operands of numeric type,\n  // producing the difference of its operands; the left operand is the minuend and the right\n  // operand is the subtrahend. Given numeric operands a and b, it is always the case that\n  // a-b produces the same result as a+(-b).\n  if (subtract) {\n    bnum = -bnum;\n  }\n\n  return IntegralValue.createFromNumberValue(realm, anum + bnum);\n}\n\n// ECMA262 12.10.4\nexport function InstanceofOperator(realm: Realm, O: Value, C: Value): boolean {\n  // 1. If Type(C) is not Object, throw a TypeError exception.\n  if (!C.mightBeObject()) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.TypeError, \"Expecting a function in instanceof check\");\n  }\n\n  // 2. Let instOfHandler be ? GetMethod(C, @@hasInstance).\n  let instOfHandler = GetMethod(realm, C, realm.intrinsics.SymbolHasInstance);\n\n  // 3. If instOfHandler is not undefined, then\n  if (!(instOfHandler instanceof UndefinedValue)) {\n    // a. Return ToBoolean(? Call(instOfHandler, C, « O »)).\n    return To.ToBooleanPartial(realm, Call(realm, instOfHandler, C, [O]));\n  }\n\n  // 4. If IsCallable(C) is false, throw a TypeError exception.\n  if (IsCallable(realm, C) === false) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.TypeError, \"Expecting a function in instanceof check\");\n  }\n\n  // 5. Return ? OrdinaryHasInstance(C, O).\n  return OrdinaryHasInstance(realm, C, O);\n}\n\n// ECMA262 7.3.19\nexport function OrdinaryHasInstance(realm: Realm, C: Value, O: Value): boolean {\n  // 1. If IsCallable(C) is false, return false.\n  if (IsCallable(realm, C) === false) return false;\n  invariant(C instanceof ObjectValue);\n\n  // 2. If C has a [[BoundTargetFunction]] internal slot, then\n  if (C instanceof BoundFunctionValue) {\n    // a. Let BC be the value of C's [[BoundTargetFunction]] internal slot.\n    let BC = C.$BoundTargetFunction;\n\n    // b. Return ? InstanceofOperator(O, BC).\n    return InstanceofOperator(realm, O, BC);\n  }\n\n  // 3. If Type(O) is not Object, return false.\n  O = O.throwIfNotConcrete();\n  if (!(O instanceof ObjectValue)) return false;\n\n  // 4. Let P be ? Get(C, \"prototype\").\n  let P = Get(realm, C, \"prototype\").throwIfNotConcrete();\n\n  // 5. If Type(P) is not Object, throw a TypeError exception.\n  if (!(P instanceof ObjectValue)) {\n    throw realm.createErrorThrowCompletion(realm.intrinsics.TypeError, \"Type(P) is not Object\");\n  }\n\n  // 6. Repeat\n  while (true) {\n    // a. Let O be ? O.[[GetPrototypeOf]]().\n    O = O.$GetPrototypeOf();\n\n    // b. If O is null, return false.\n    if (O instanceof NullValue) return false;\n\n    // c. If SameValue(P, O) is true, return true.\n    if (SameValuePartial(realm, P, O) === true) return true;\n  }\n\n  return false;\n}\n\n//\nexport function Type(realm: Realm, val: Value): string {\n  if (val instanceof UndefinedValue) {\n    return \"Undefined\";\n  } else if (val instanceof NullValue) {\n    return \"Null\";\n  } else if (HasCompatibleType(val, BooleanValue)) {\n    return \"Boolean\";\n  } else if (HasCompatibleType(val, StringValue)) {\n    return \"String\";\n  } else if (HasCompatibleType(val, SymbolValue)) {\n    return \"Symbol\";\n  } else if (HasCompatibleType(val, IntegralValue)) {\n    return \"Number\";\n  } else if (HasCompatibleType(val, NumberValue)) {\n    return \"Number\";\n  } else if (!val.mightNotBeObject()) {\n    return \"Object\";\n  } else {\n    invariant(val instanceof AbstractValue);\n    AbstractValue.reportIntrospectionError(val);\n    throw new FatalError();\n  }\n}\n\n// ECMA262 19.4.3.2.1\nexport function SymbolDescriptiveString(realm: Realm, sym: SymbolValue): string {\n  // 1. Assert: Type(sym) is Symbol.\n  invariant(sym instanceof SymbolValue, \"expected symbol\");\n\n  // 2. Let desc be sym's [[Description]] value.\n  let desc = sym.$Description;\n\n  // 3. If desc is undefined, let desc be the empty string.\n  if (!desc) desc = \"\";\n  else desc = desc.throwIfNotConcreteString().value;\n\n  // 4. Assert: Type(desc) is String.\n  invariant(typeof desc === \"string\", \"expected string\");\n\n  // 5. Return the result of concatenating the strings \"Symbol(\", desc, and \")\".\n  return `Symbol(${desc})`;\n}\n\n// ECMA262 6.2.2.5\nexport function UpdateEmpty(realm: Realm, completionRecord: Completion | Value, value: Value): Completion | Value {\n  // 1. Assert: If completionRecord.[[Type]] is either return or throw, then completionRecord.[[Value]] is not empty.\n  if (completionRecord instanceof ReturnCompletion || completionRecord instanceof ThrowCompletion) {\n    invariant(completionRecord.value, \"expected completion record to have a value\");\n  }\n\n  // 2. If completionRecord.[[Value]] is not empty, return Completion(completionRecord).\n  if (completionRecord instanceof EmptyValue) return value;\n  if (completionRecord instanceof Value || (completionRecord.value && !(completionRecord.value instanceof EmptyValue)))\n    return completionRecord;\n\n  // 3. Return Completion{[[Type]]: completionRecord.[[Type]], [[Value]]: value, [[Target]]: completionRecord.[[Target]] }.'\n  completionRecord.value = value;\n  return completionRecord;\n}\n"]}