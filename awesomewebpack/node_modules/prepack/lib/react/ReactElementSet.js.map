{"version":3,"sources":["../../src/react/ReactElementSet.js"],"names":["ReactElementSet","constructor","realm","reactEquivalenceSet","add","reactElement","visitedValues","Set","currentMap","reactElementRoot","getKey","type","getEquivalentPropertyValue","result","getValue","map","key","ref","props","value"],"mappings":";;;;;;;AAWA;;AACA;;AACA;;;;AACA;;;;AAdA;;;;;;;;;AAgBO,MAAMA,eAAN,CAAsB;AAC3BC,cAAYC,KAAZ,EAA0BC,mBAA1B,EAAoE;AAClE,SAAKD,KAAL,GAAaA,KAAb;AACA,SAAKC,mBAAL,GAA2BA,mBAA3B;AACD;;;AAIDC,MAAIC,YAAJ,EAA+BC,aAA/B,EAA8E;AAC5E,QAAI,CAACA,aAAL,EAAoBA,gBAAgB,IAAIC,GAAJ,EAAhB;AACpB,QAAIJ,sBAAsB,KAAKA,mBAA/B;AACA,QAAIK,aAAaL,oBAAoBM,gBAArC;;AAEA;AACAD,iBAAaL,oBAAoBO,MAApB,CAA2B,MAA3B,EAAmCF,UAAnC,EAA+CF,aAA/C,CAAb;AACA,QAAIK,OAAOR,oBAAoBS,0BAApB,CAA+CP,YAA/C,EAA6D,MAA7D,CAAX;AACA,QAAIQ,SAASV,oBAAoBW,QAApB,CAA6BH,IAA7B,EAAmCH,UAAnC,EAA+CF,aAA/C,CAAb;AACAE,iBAAaK,OAAOE,GAApB;AACA;AACAP,iBAAaL,oBAAoBO,MAApB,CAA2B,KAA3B,EAAkCF,UAAlC,EAA8CF,aAA9C,CAAb;AACA,QAAIU,MAAMb,oBAAoBS,0BAApB,CAA+CP,YAA/C,EAA6D,KAA7D,CAAV;AACAQ,aAASV,oBAAoBW,QAApB,CAA6BE,GAA7B,EAAkCR,UAAlC,EAA8CF,aAA9C,CAAT;AACAE,iBAAaK,OAAOE,GAApB;AACA;AACAP,iBAAaL,oBAAoBO,MAApB,CAA2B,KAA3B,EAAkCF,UAAlC,EAA8CF,aAA9C,CAAb;AACA,QAAIW,MAAMd,oBAAoBS,0BAApB,CAA+CP,YAA/C,EAA6D,KAA7D,CAAV;AACAQ,aAASV,oBAAoBW,QAApB,CAA6BG,GAA7B,EAAkCT,UAAlC,EAA8CF,aAA9C,CAAT;AACAE,iBAAaK,OAAOE,GAApB;AACA;AACAP,iBAAaL,oBAAoBO,MAApB,CAA2B,OAA3B,EAAoCF,UAApC,EAAgDF,aAAhD,CAAb;AACA,QAAIY,QAAQf,oBAAoBS,0BAApB,CAA+CP,YAA/C,EAA6D,OAA7D,CAAZ;AACAQ,aAASV,oBAAoBW,QAApB,CAA6BI,KAA7B,EAAoCV,UAApC,EAAgDF,aAAhD,CAAT;;AAEA,QAAIO,OAAOM,KAAP,KAAiB,IAArB,EAA2B;AACzBN,aAAOM,KAAP,GAAed,YAAf;AACD;AACD,6BAAUQ,OAAOM,KAAP,8BAAV;AACA,WAAON,OAAOM,KAAd;AACD;AAtC0B;QAAhBnB,e,GAAAA,e","file":"ReactElementSet.js","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\n\nimport { Realm } from \"../realm.js\";\nimport { ObjectValue, Value } from \"../values/index.js\";\nimport invariant from \"../invariant.js\";\nimport { ReactEquivalenceSet } from \"./ReactEquivalenceSet.js\";\n\nexport class ReactElementSet {\n  constructor(realm: Realm, reactEquivalenceSet: ReactEquivalenceSet) {\n    this.realm = realm;\n    this.reactEquivalenceSet = reactEquivalenceSet;\n  }\n  realm: Realm;\n  reactEquivalenceSet: ReactEquivalenceSet;\n\n  add(reactElement: ObjectValue, visitedValues: Set<Value> | void): ObjectValue {\n    if (!visitedValues) visitedValues = new Set();\n    let reactEquivalenceSet = this.reactEquivalenceSet;\n    let currentMap = reactEquivalenceSet.reactElementRoot;\n\n    // type\n    currentMap = reactEquivalenceSet.getKey(\"type\", currentMap, visitedValues);\n    let type = reactEquivalenceSet.getEquivalentPropertyValue(reactElement, \"type\");\n    let result = reactEquivalenceSet.getValue(type, currentMap, visitedValues);\n    currentMap = result.map;\n    // key\n    currentMap = reactEquivalenceSet.getKey(\"key\", currentMap, visitedValues);\n    let key = reactEquivalenceSet.getEquivalentPropertyValue(reactElement, \"key\");\n    result = reactEquivalenceSet.getValue(key, currentMap, visitedValues);\n    currentMap = result.map;\n    // ref\n    currentMap = reactEquivalenceSet.getKey(\"ref\", currentMap, visitedValues);\n    let ref = reactEquivalenceSet.getEquivalentPropertyValue(reactElement, \"ref\");\n    result = reactEquivalenceSet.getValue(ref, currentMap, visitedValues);\n    currentMap = result.map;\n    // props\n    currentMap = reactEquivalenceSet.getKey(\"props\", currentMap, visitedValues);\n    let props = reactEquivalenceSet.getEquivalentPropertyValue(reactElement, \"props\");\n    result = reactEquivalenceSet.getValue(props, currentMap, visitedValues);\n\n    if (result.value === null) {\n      result.value = reactElement;\n    }\n    invariant(result.value instanceof ObjectValue);\n    return result.value;\n  }\n}\n"]}