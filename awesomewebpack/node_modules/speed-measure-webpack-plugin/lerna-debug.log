0 silly input [ 'test' ]
1 silly flags { _: [ 'run' ],
1 silly flags   'reject-cycles': false,
1 silly flags   rejectCycles: false,
1 silly flags   script: 'test',
1 silly flags   args: [] }
2 verbose rootPath /home/stephen/workspace/speed-measure-webpack-plugin
3 info version 2.9.0
4 silly existsSync /home/stephen/workspace/speed-measure-webpack-plugin/VERSION
5 silly initialize attempt
6 silly initialize success
7 silly execute attempt
8 silly runScriptInDir test [] v1-plain
9 silly getExecOpts { cwd: '/home/stephen/workspace/speed-measure-webpack-plugin/__tests__/setups/v1-plain' }
10 silly runScriptInDir test [] v2-plain
11 silly getExecOpts { cwd: '/home/stephen/workspace/speed-measure-webpack-plugin/__tests__/setups/v2-plain' }
12 silly runScriptInDir test [] v3-circular-plugin
13 silly getExecOpts { cwd: '/home/stephen/workspace/speed-measure-webpack-plugin/__tests__/setups/v3-circular-plugin' }
14 silly runScriptInDir test [] v3-hard-source-webpack-plugin
15 silly getExecOpts { cwd: '/home/stephen/workspace/speed-measure-webpack-plugin/__tests__/setups/v3-hard-source-webpack-plugin' }
16 silly runScriptInDir test [] v3-plain
17 silly getExecOpts { cwd: '/home/stephen/workspace/speed-measure-webpack-plugin/__tests__/setups/v3-plain' }
18 error test Errored while running script in 'v3-hard-source-webpack-plugin'
19 error execute callback with error
20 error Error: Command failed: npm run test
20 error FAIL ./smp.test.js
20 error   smp - v3-hard-source-webpack-plugin
20 error     vanilla config
20 error       ✕ should generate the same app.js content (8ms)
20 error       ✕ should generate the same app.js content after 2 runs (7ms)
20 error       ✕ should state the time taken overall (1ms)
20 error       ✕ should state the time taken by the plugins
20 error       ✕ should state the time taken by the loaders (1ms)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should generate the same app.js content
20 error
20 error     TypeError: Cannot convert undefined or null to object
20 error         at Function.keys (<anonymous>)
20 error
20 error       137 |   };
20 error       138 |
20 error     > 139 |   return Object.keys(hooks).reduce((acc, method) => {
20 error       140 |     acc[method] = genProxy(method);
20 error       141 |     return acc;
20 error       142 |   }, {});
20 error
20 error       at wrapHooks (../../../WrappedPlugin/index.js:139:17)
20 error       at Object.get (../../../WrappedPlugin/index.js:201:18)
20 error       at Object.<anonymous>.exports.register (node_modules/hard-source-webpack-plugin/lib/util/plugin-compat.js:34:15)
20 error       at new LoggerFactory (node_modules/hard-source-webpack-plugin/lib/logger-factory.js:191:16)
20 error       at HardSourceWebpackPlugin.Object.<anonymous>.HardSourceWebpackPlugin.apply (node_modules/hard-source-webpack-plugin/index.js:161:16)
20 error       at WrappedPlugin.apply (../../../WrappedPlugin/index.js:260:29)
20 error       at Compiler.apply (node_modules/webpack/node_modules/tapable/lib/Tapable.js:375:16)
20 error       at webpack (node_modules/webpack/lib/webpack.js:33:19)
20 error       at Promise (smp.test.js:17:5)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should generate the same app.js content
20 error
20 error     expect(received).toEqual(expected)
20 error
20 error     Expected value to equal:
20 error       "/******/ (function(modules) { // webpackBootstrap
20 error     /******/ 	// The module cache
20 error     /******/ 	var installedModules = {};
20 error     /******/
20 error     /******/ 	// The require function
20 error     /******/ 	function __webpack_require__(moduleId) {
20 error     /******/
20 error     /******/ 		// Check if module is in cache
20 error     /******/ 		if(installedModules[moduleId]) {
20 error     /******/ 			return installedModules[moduleId].exports;
20 error     /******/ 		}
20 error     /******/ 		// Create a new module (and put it into the cache)
20 error     /******/ 		var module = installedModules[moduleId] = {
20 error     /******/ 			i: moduleId,
20 error     /******/ 			l: false,
20 error     /******/ 			exports: {}
20 error     /******/ 		};
20 error     /******/
20 error     /******/ 		// Execute the module function
20 error     /******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
20 error     /******/
20 error     /******/ 		// Flag the module as loaded
20 error     /******/ 		module.l = true;
20 error     /******/
20 error     /******/ 		// Return the exports of the module
20 error     /******/ 		return module.exports;
20 error     /******/ 	}
20 error     /******/
20 error     /******/
20 error     /******/ 	// expose the modules object (__webpack_modules__)
20 error     /******/ 	__webpack_require__.m = modules;
20 error     /******/
20 error     /******/ 	// expose the module cache
20 error     /******/ 	__webpack_require__.c = installedModules;
20 error     /******/
20 error     /******/ 	// define getter function for harmony exports
20 error     /******/ 	__webpack_require__.d = function(exports, name, getter) {
20 error     /******/ 		if(!__webpack_require__.o(exports, name)) {
20 error     /******/ 			Object.defineProperty(exports, name, {
20 error     /******/ 				configurable: false,
20 error     /******/ 				enumerable: true,
20 error     /******/ 				get: getter
20 error     /******/ 			});
20 error     /******/ 		}
20 error     /******/ 	};
20 error     /******/
20 error     /******/ 	// getDefaultExport function for compatibility with non-harmony modules
20 error     /******/ 	__webpack_require__.n = function(module) {
20 error     /******/ 		var getter = module && module.__esModule ?
20 error     /******/ 			function getDefault() { return module['default']; } :
20 error     /******/ 			function getModuleExports() { return module; };
20 error     /******/ 		__webpack_require__.d(getter, 'a', getter);
20 error     /******/ 		return getter;
20 error     /******/ 	};
20 error     /******/
20 error     /******/ 	// Object.prototype.hasOwnProperty.call
20 error     /******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
20 error     /******/
20 error     /******/ 	// __webpack_public_path__
20 error     /******/ 	__webpack_require__.p = \"\";
20 error     /******/
20 error     /******/ 	// Load entry module and return exports
20 error     /******/ 	return __webpack_require__(__webpack_require__.s = 0);
20 error     /******/ })
20 error     /************************************************************************/
20 error     /******/ ([
20 error     /* 0 */
20 error     /***/ (function(module, exports, __webpack_require__) {
20 error
20 error     module.exports = __webpack_require__(1);
20 error
20 error
20 error     /***/ }),
20 error     /* 1 */
20 error     /***/ (function(module, exports, __webpack_require__) {
20 error
20 error     __webpack_require__(2);
20 error     __webpack_require__(3);
20 error
20 error     console.log(\"Some javascript\", 'BAR');
20 error
20 error     /***/ }),
20 error     /* 2 */
20 error     /***/ (function(module, exports) {
20 error
20 error     const a = 1;
20 error
20 error     /***/ }),
20 error     /* 3 */
20 error     /***/ (function(module, exports, __webpack_require__) {
20 error
20 error
20 error     var content = __webpack_require__(4);
20 error
20 error     if(typeof content === 'string') content = [[module.i, content, '']];
20 error
20 error     var transform;
20 error     var insertInto;
20 error
20 error
20 error
20 error     var options = {\"hmr\":true}
20 error
20 error     options.transform = transform
20 error     options.insertInto = undefined;
20 error
20 error     var update = __webpack_require__(6)(content, options);
20 error
20 error     if(content.locals) module.exports = content.locals;
20 error
20 error     if(false) {
20 error     	module.hot.accept(\"!!./node_modules/css-loader/index.js!./styles.css\", function() {
20 error     		var newContent = require(\"!!./node_modules/css-loader/index.js!./styles.css\");
20 error
20 error     		if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
20 error
20 error     		var locals = (function(a, b) {
20 error     			var key, idx = 0;
20 error
20 error     			for(key in a) {
20 error     				if(!b || a[key] !== b[key]) return false;
20 error     				idx++;
20 error     			}
20 error
20 error     			for(key in b) idx--;
20 error
20 error     			return idx === 0;
20 error     		}(content.locals, newContent.locals));
20 error
20 error     		if(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');
20 error
20 error     		update(newContent);
20 error     	});
20 error
20 error     	module.hot.dispose(function() { update(); });
20 error     }
20 error
20 error     /***/ }),
20 error     /* 4 */
20 error     /***/ (function(module, exports, __webpack_require__) {
20 error
20 error     exports = module.exports = __webpack_require__(5)(false);
20 error     // imports
20 error
20 error
20 error     // module
20 error     exports.push([module.i, \".a {\\n  color: red;\\n}\\n\", \"\"]);
20 error
20 error     // exports
20 error
20 error
20 error     /***/ }),
20 error     /* 5 */
20 error     /***/ (function(module, exports) {
20 error
20 error     /*
20 error     	MIT License http://www.opensource.org/licenses/mit-license.php
20 error     	Author Tobias Koppers @sokra
20 error     */
20 error     // css base code, injected by the css-loader
20 error     module.exports = function (useSourceMap) {
20 error     	var list = [];
20 error
20 error     	// return the list of modules as css string
20 error     	list.toString = function toString() {
20 error     		return this.map(function (item) {
20 error     			var content = cssWithMappingToString(item, useSourceMap);
20 error     			if (item[2]) {
20 error     				return \"@media \" + item[2] + \"{\" + content + \"}\";
20 error     			} else {
20 error     				return content;
20 error     			}
20 error     		}).join(\"\");
20 error     	};
20 error
20 error     	// import a list of modules into the list
20 error     	list.i = function (modules, mediaQuery) {
20 error     		if (typeof modules === \"string\") modules = [[null, modules, \"\"]];
20 error     		var alreadyImportedModules = {};
20 error     		for (var i = 0; i < this.length; i++) {
20 error     			var id = this[i][0];
20 error     			if (typeof id === \"number\") alreadyImportedModules[id] = true;
20 error     		}
20 error     		for (i = 0; i < modules.length; i++) {
20 error     			var item = modules[i];
20 error     			// skip already imported module
20 error     			// this implementation is not 100% perfect for weird media query combinations
20 error     			//  when a module is imported multiple times with different media queries.
20 error     			//  I hope this will never occur (Hey this way we have smaller bundles)
20 error     			if (typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {
20 error     				if (mediaQuery && !item[2]) {
20 error     					item[2] = mediaQuery;
20 error     				} else if (mediaQuery) {
20 error     					item[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";
20 error     				}
20 error     				list.push(item);
20 error     			}
20 error     		}
20 error     	};
20 error     	return list;
20 error     };
20 error
20 error     function cssWithMappingToString(item, useSourceMap) {
20 error     	var content = item[1] || '';
20 error     	var cssMapping = item[3];
20 error     	if (!cssMapping) {
20 error     		return content;
20 error     	}
20 error
20 error     	if (useSourceMap && typeof btoa === 'function') {
20 error     		var sourceMapping = toComment(cssMapping);
20 error     		var sourceURLs = cssMapping.sources.map(function (source) {
20 error     			return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';
20 error     		});
20 error
20 error     		return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');
20 error     	}
20 error
20 error     	return [content].join('\\n');
20 error     }
20 error
20 error     // Adapted from convert-source-map (MIT)
20 error     function toComment(sourceMap) {
20 error     	// eslint-disable-next-line no-undef
20 error     	var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
20 error     	var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;
20 error
20 error     	return '/*# ' + data + ' */';
20 error     }
20 error
20 error     /***/ }),
20 error     /* 6 */
20 error     /***/ (function(module, exports, __webpack_require__) {
20 error
20 error     /*
20 error     	MIT License http://www.opensource.org/licenses/mit-license.php
20 error     	Author Tobias Koppers @sokra
20 error     */
20 error
20 error     var stylesInDom = {};
20 error
20 error     var	memoize = function (fn) {
20 error     	var memo;
20 error
20 error     	return function () {
20 error     		if (typeof memo === \"undefined\") memo = fn.apply(this, arguments);
20 error     		return memo;
20 error     	};
20 error     };
20 error
20 error     var isOldIE = memoize(function () {
20 error     	// Test for IE <= 9 as proposed by Browserhacks
20 error     	// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
20 error     	// Tests for existence of standard globals is to allow style-loader
20 error     	// to operate correctly into non-standard environments
20 error     	// @see https://github.com/webpack-contrib/style-loader/issues/177
20 error     	return window && document && document.all && !window.atob;
20 error     });
20 error
20 error     var getTarget = function (target) {
20 error       return document.querySelector(target);
20 error     };
20 error
20 error     var getElement = (function (fn) {
20 error     	var memo = {};
20 error
20 error     	return function(target) {
20 error                     // If passing function in options, then use it for resolve \"head\" element.
20 error                     // Useful for Shadow Root style i.e
20 error                     // {
20 error                     //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }
20 error                     // }
20 error                     if (typeof target === 'function') {
20 error                             return target();
20 error                     }
20 error                     if (typeof memo[target] === \"undefined\") {
20 error     			var styleTarget = getTarget.call(this, target);
20 error     			// Special case to return head of iframe instead of iframe itself
20 error     			if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
20 error     				try {
20 error     					// This will throw an exception if access to iframe is blocked
20 error     					// due to cross-origin restrictions
20 error     					styleTarget = styleTarget.contentDocument.head;
20 error     				} catch(e) {
20 error     					styleTarget = null;
20 error     				}
20 error     			}
20 error     			memo[target] = styleTarget;
20 error     		}
20 error     		return memo[target]
20 error     	};
20 error     })();
20 error
20 error     var singleton = null;
20 error     var	singletonCounter = 0;
20 error     var	stylesInsertedAtTop = [];
20 error
20 error     var	fixUrls = __webpack_require__(7);
20 error
20 error     module.exports = function(list, options) {
20 error     	if (typeof DEBUG !== \"undefined\" && DEBUG) {
20 error     		if (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");
20 error     	}
20 error
20 error     	options = options || {};
20 error
20 error     	options.attrs = typeof options.attrs === \"object\" ? options.attrs : {};
20 error
20 error     	// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
20 error     	// tags it will allow on a page
20 error     	if (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();
20 error
20 error     	// By default, add <style> tags to the <head> element
20 error             if (!options.insertInto) options.insertInto = \"head\";
20 error
20 error     	// By default, add <style> tags to the bottom of the target
20 error     	if (!options.insertAt) options.insertAt = \"bottom\";
20 error
20 error     	var styles = listToStyles(list, options);
20 error
20 error     	addStylesToDom(styles, options);
20 error
20 error     	return function update (newList) {
20 error     		var mayRemove = [];
20 error
20 error     		for (var i = 0; i < styles.length; i++) {
20 error     			var item = styles[i];
20 error     			var domStyle = stylesInDom[item.id];
20 error
20 error     			domStyle.refs--;
20 error     			mayRemove.push(domStyle);
20 error     		}
20 error
20 error     		if(newList) {
20 error     			var newStyles = listToStyles(newList, options);
20 error     			addStylesToDom(newStyles, options);
20 error     		}
20 error
20 error     		for (var i = 0; i < mayRemove.length; i++) {
20 error     			var domStyle = mayRemove[i];
20 error
20 error     			if(domStyle.refs === 0) {
20 error     				for (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();
20 error
20 error     				delete stylesInDom[domStyle.id];
20 error     			}
20 error     		}
20 error     	};
20 error     };
20 error
20 error     function addStylesToDom (styles, options) {
20 error     	for (var i = 0; i < styles.length; i++) {
20 error     		var item = styles[i];
20 error     		var domStyle = stylesInDom[item.id];
20 error
20 error     		if(domStyle) {
20 error     			domStyle.refs++;
20 error
20 error     			for(var j = 0; j < domStyle.parts.length; j++) {
20 error     				domStyle.parts[j](item.parts[j]);
20 error     			}
20 error
20 error     			for(; j < item.parts.length; j++) {
20 error     				domStyle.parts.push(addStyle(item.parts[j], options));
20 error     			}
20 error     		} else {
20 error     			var parts = [];
20 error
20 error     			for(var j = 0; j < item.parts.length; j++) {
20 error     				parts.push(addStyle(item.parts[j], options));
20 error     			}
20 error
20 error     			stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
20 error     		}
20 error     	}
20 error     }
20 error
20 error     function listToStyles (list, options) {
20 error     	var styles = [];
20 error     	var newStyles = {};
20 error
20 error     	for (var i = 0; i < list.length; i++) {
20 error     		var item = list[i];
20 error     		var id = options.base ? item[0] + options.base : item[0];
20 error     		var css = item[1];
20 error     		var media = item[2];
20 error     		var sourceMap = item[3];
20 error     		var part = {css: css, media: media, sourceMap: sourceMap};
20 error
20 error     		if(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});
20 error     		else newStyles[id].parts.push(part);
20 error     	}
20 error
20 error     	return styles;
20 error     }
20 error
20 error     function insertStyleElement (options, style) {
20 error     	var target = getElement(options.insertInto)
20 error
20 error     	if (!target) {
20 error     		throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");
20 error     	}
20 error
20 error     	var lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];
20 error
20 error     	if (options.insertAt === \"top\") {
20 error     		if (!lastStyleElementInsertedAtTop) {
20 error     			target.insertBefore(style, target.firstChild);
20 error     		} else if (lastStyleElementInsertedAtTop.nextSibling) {
20 error     			target.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);
20 error     		} else {
20 error     			target.appendChild(style);
20 error     		}
20 error     		stylesInsertedAtTop.push(style);
20 error     	} else if (options.insertAt === \"bottom\") {
20 error     		target.appendChild(style);
20 error     	} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {
20 error     		var nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);
20 error     		target.insertBefore(style, nextSibling);
20 error     	} else {
20 error     		throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");
20 error     	}
20 error     }
20 error
20 error     function removeStyleElement (style) {
20 error     	if (style.parentNode === null) return false;
20 error     	style.parentNode.removeChild(style);
20 error
20 error     	var idx = stylesInsertedAtTop.indexOf(style);
20 error     	if(idx >= 0) {
20 error     		stylesInsertedAtTop.splice(idx, 1);
20 error     	}
20 error     }
20 error
20 error     function createStyleElement (options) {
20 error     	var style = document.createElement(\"style\");
20 error
20 error     	options.attrs.type = \"text/css\";
20 error
20 error     	addAttrs(style, options.attrs);
20 error     	insertStyleElement(options, style);
20 error
20 error     	return style;
20 error     }
20 error
20 error     function createLinkElement (options) {
20 error     	var link = document.createElement(\"link\");
20 error
20 error     	options.attrs.type = \"text/css\";
20 error     	options.attrs.rel = \"stylesheet\";
20 error
20 error     	addAttrs(link, options.attrs);
20 error     	insertStyleElement(options, link);
20 error
20 error     	return link;
20 error     }
20 error
20 error     function addAttrs (el, attrs) {
20 error     	Object.keys(attrs).forEach(function (key) {
20 error     		el.setAttribute(key, attrs[key]);
20 error     	});
20 error     }
20 error
20 error     function addStyle (obj, options) {
20 error     	var style, update, remove, result;
20 error
20 error     	// If a transform function was defined, run it on the css
20 error     	if (options.transform && obj.css) {
20 error     	    result = options.transform(obj.css);
20 error
20 error     	    if (result) {
20 error     	    	// If transform returns a value, use that instead of the original css.
20 error     	    	// This allows running runtime transformations on the css.
20 error     	    	obj.css = result;
20 error     	    } else {
20 error     	    	// If the transform function returns a falsy value, don't add this css.
20 error     	    	// This allows conditional loading of css
20 error     	    	return function() {
20 error     	    		// noop
20 error     	    	};
20 error     	    }
20 error     	}
20 error
20 error     	if (options.singleton) {
20 error     		var styleIndex = singletonCounter++;
20 error
20 error     		style = singleton || (singleton = createStyleElement(options));
20 error
20 error     		update = applyToSingletonTag.bind(null, style, styleIndex, false);
20 error     		remove = applyToSingletonTag.bind(null, style, styleIndex, true);
20 error
20 error     	} else if (
20 error     		obj.sourceMap &&
20 error     		typeof URL === \"function\" &&
20 error     		typeof URL.createObjectURL === \"function\" &&
20 error     		typeof URL.revokeObjectURL === \"function\" &&
20 error     		typeof Blob === \"function\" &&
20 error     		typeof btoa === \"function\"
20 error     	) {
20 error     		style = createLinkElement(options);
20 error     		update = updateLink.bind(null, style, options);
20 error     		remove = function () {
20 error     			removeStyleElement(style);
20 error
20 error     			if(style.href) URL.revokeObjectURL(style.href);
20 error     		};
20 error     	} else {
20 error     		style = createStyleElement(options);
20 error     		update = applyToTag.bind(null, style);
20 error     		remove = function () {
20 error     			removeStyleElement(style);
20 error     		};
20 error     	}
20 error
20 error     	update(obj);
20 error
20 error     	return function updateStyle (newObj) {
20 error     		if (newObj) {
20 error     			if (
20 error     				newObj.css === obj.css &&
20 error     				newObj.media === obj.media &&
20 error     				newObj.sourceMap === obj.sourceMap
20 error     			) {
20 error     				return;
20 error     			}
20 error
20 error     			update(obj = newObj);
20 error     		} else {
20 error     			remove();
20 error     		}
20 error     	};
20 error     }
20 error
20 error     var replaceText = (function () {
20 error     	var textStore = [];
20 error
20 error     	return function (index, replacement) {
20 error     		textStore[index] = replacement;
20 error
20 error     		return textStore.filter(Boolean).join('\\n');
20 error     	};
20 error     })();
20 error
20 error     function applyToSingletonTag (style, index, remove, obj) {
20 error     	var css = remove ? \"\" : obj.css;
20 error
20 error     	if (style.styleSheet) {
20 error     		style.styleSheet.cssText = replaceText(index, css);
20 error     	} else {
20 error     		var cssNode = document.createTextNode(css);
20 error     		var childNodes = style.childNodes;
20 error
20 error     		if (childNodes[index]) style.removeChild(childNodes[index]);
20 error
20 error     		if (childNodes.length) {
20 error     			style.insertBefore(cssNode, childNodes[index]);
20 error     		} else {
20 error     			style.appendChild(cssNode);
20 error     		}
20 error     	}
20 error     }
20 error
20 error     function applyToTag (style, obj) {
20 error     	var css = obj.css;
20 error     	var media = obj.media;
20 error
20 error     	if(media) {
20 error     		style.setAttribute(\"media\", media)
20 error     	}
20 error
20 error     	if(style.styleSheet) {
20 error     		style.styleSheet.cssText = css;
20 error     	} else {
20 error     		while(style.firstChild) {
20 error     			style.removeChild(style.firstChild);
20 error     		}
20 error
20 error     		style.appendChild(document.createTextNode(css));
20 error     	}
20 error     }
20 error
20 error     function updateLink (link, options, obj) {
20 error     	var css = obj.css;
20 error     	var sourceMap = obj.sourceMap;
20 error
20 error     	/*
20 error     		If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled
20 error     		and there is no publicPath defined then lets turn convertToAbsoluteUrls
20 error     		on by default.  Otherwise default to the convertToAbsoluteUrls option
20 error     		directly
20 error     	*/
20 error     	var autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;
20 error
20 error     	if (options.convertToAbsoluteUrls || autoFixUrls) {
20 error     		css = fixUrls(css);
20 error     	}
20 error
20 error     	if (sourceMap) {
20 error     		// http://stackoverflow.com/a/26603875
20 error     		css += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";
20 error     	}
20 error
20 error     	var blob = new Blob([css], { type: \"text/css\" });
20 error
20 error     	var oldSrc = link.href;
20 error
20 error     	link.href = URL.createObjectURL(blob);
20 error
20 error     	if(oldSrc) URL.revokeObjectURL(oldSrc);
20 error     }
20 error
20 error
20 error     /***/ }),
20 error     /* 7 */
20 error     /***/ (function(module, exports) {
20 error
20 error
20 error     /**
20 error      * When source maps are enabled, `style-loader` uses a link element with a data-uri to
20 error      * embed the css on the page. This breaks all relative urls because now they are relative to a
20 error      * bundle instead of the current page.
20 error      *
20 error      * One solution is to only use full urls, but that may be impossible.
20 error      *
20 error      * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.
20 error      *
20 error      * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.
20 error      *
20 error      */
20 error
20 error     module.exports = function (css) {
20 error     	// get current location
20 error     	var location = typeof window !== \"undefined\" && window.location;
20 error
20 error     	if (!location) {
20 error     		throw new Error(\"fixUrls requires window.location\");
20 error     	}
20 error
20 error     	// blank or null?
20 error     	if (!css || typeof css !== \"string\") {
20 error     		return css;
20 error     	}
20 error
20 error     	var baseUrl = location.protocol + \"//\" + location.host;
20 error     	var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");
20 error
20 error     	// convert each url(...)
20 error     	/*
20 error      This regular expression is just a way to recursively match brackets within
20 error      a string.
20 error      	 /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens
20 error         (  = Start a capturing group
20 error           (?:  = Start a non-capturing group
20 error               [^)(]  = Match anything that isn't a parentheses
20 error               |  = OR
20 error               \\(  = Match a start parentheses
20 error                   (?:  = Start another non-capturing groups
20 error                       [^)(]+  = Match anything that isn't a parentheses
20 error                       |  = OR
20 error                       \\(  = Match a start parentheses
20 error                           [^)(]*  = Match anything that isn't a parentheses
20 error                       \\)  = Match a end parentheses
20 error                   )  = End Group
20 error                   *\\) = Match anything and then a close parens
20 error               )  = Close non-capturing group
20 error               *  = Match anything
20 error            )  = Close capturing group
20 error       \\)  = Match a close parens
20 error      	 /gi  = Get all matches, not the first.  Be case insensitive.
20 error       */
20 error     	var fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function (fullMatch, origUrl) {
20 error     		// strip quotes (if they exist)
20 error     		var unquotedOrigUrl = origUrl.trim().replace(/^\"(.*)\"$/, function (o, $1) {
20 error     			return $1;
20 error     		}).replace(/^'(.*)'$/, function (o, $1) {
20 error     			return $1;
20 error     		});
20 error
20 error     		// already a full url? no change
20 error     		if (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {
20 error     			return fullMatch;
20 error     		}
20 error
20 error     		// convert the url to a full url
20 error     		var newUrl;
20 error
20 error     		if (unquotedOrigUrl.indexOf(\"//\") === 0) {
20 error     			//TODO: should we add protocol?
20 error     			newUrl = unquotedOrigUrl;
20 error     		} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {
20 error     			// path should be relative to the base url
20 error     			newUrl = baseUrl + unquotedOrigUrl; // already starts with '/'
20 error     		} else {
20 error     			// path should be relative to current directory
20 error     			newUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'
20 error     		}
20 error
20 error     		// send back the fixed url(...)
20 error     		return \"url(\" + JSON.stringify(newUrl) + \")\";
20 error     	});
20 error
20 error     	// send back the fixed css
20 error     	return fixedCss;
20 error     };
20 error
20 error     /***/ })
20 error     /******/ ]);"
20 error     Received:
20 error       undefined
20 error
20 error     Difference:
20 error
20 error       Comparing two different types of values. Expected string but received undefined.
20 error
20 error       38 |
20 error       39 |     it("should generate the same app.js content", () => {
20 error     > 40 |       expect(smpDistApp).toEqual(distApp);
20 error       41 |     });
20 error       42 |
20 error       43 |     it("should generate the same app.js content after 2 runs", () => {
20 error
20 error       at Object.it (smp.test.js:40:26)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should generate the same app.js content after 2 runs
20 error
20 error     TypeError: Cannot convert undefined or null to object
20 error         at Function.keys (<anonymous>)
20 error
20 error       137 |   };
20 error       138 |
20 error     > 139 |   return Object.keys(hooks).reduce((acc, method) => {
20 error       140 |     acc[method] = genProxy(method);
20 error       141 |     return acc;
20 error       142 |   }, {});
20 error
20 error       at wrapHooks (../../../WrappedPlugin/index.js:139:17)
20 error       at Object.get (../../../WrappedPlugin/index.js:201:18)
20 error       at Object.<anonymous>.exports.register (node_modules/hard-source-webpack-plugin/lib/util/plugin-compat.js:34:15)
20 error       at new LoggerFactory (node_modules/hard-source-webpack-plugin/lib/logger-factory.js:191:16)
20 error       at HardSourceWebpackPlugin.Object.<anonymous>.HardSourceWebpackPlugin.apply (node_modules/hard-source-webpack-plugin/index.js:161:16)
20 error       at WrappedPlugin.apply (../../../WrappedPlugin/index.js:260:29)
20 error       at Compiler.apply (node_modules/webpack/node_modules/tapable/lib/Tapable.js:375:16)
20 error       at webpack (node_modules/webpack/lib/webpack.js:33:19)
20 error       at Promise (smp.test.js:17:5)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should generate the same app.js content after 2 runs
20 error
20 error     TypeError: Cannot convert undefined or null to object
20 error         at Function.keys (<anonymous>)
20 error
20 error       137 |   };
20 error       138 |
20 error     > 139 |   return Object.keys(hooks).reduce((acc, method) => {
20 error       140 |     acc[method] = genProxy(method);
20 error       141 |     return acc;
20 error       142 |   }, {});
20 error
20 error       at wrapHooks (../../../WrappedPlugin/index.js:139:17)
20 error       at Object.get (../../../WrappedPlugin/index.js:201:18)
20 error       at Object.<anonymous>.exports.register (node_modules/hard-source-webpack-plugin/lib/util/plugin-compat.js:34:15)
20 error       at new LoggerFactory (node_modules/hard-source-webpack-plugin/lib/logger-factory.js:191:16)
20 error       at HardSourceWebpackPlugin.Object.<anonymous>.HardSourceWebpackPlugin.apply (node_modules/hard-source-webpack-plugin/index.js:161:16)
20 error       at WrappedPlugin.apply (../../../WrappedPlugin/index.js:260:29)
20 error       at Compiler.apply (node_modules/webpack/node_modules/tapable/lib/Tapable.js:375:16)
20 error       at webpack (node_modules/webpack/lib/webpack.js:33:19)
20 error       at Promise (smp.test.js:17:5)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should state the time taken overall
20 error
20 error     TypeError: Cannot convert undefined or null to object
20 error         at Function.keys (<anonymous>)
20 error
20 error       137 |   };
20 error       138 |
20 error     > 139 |   return Object.keys(hooks).reduce((acc, method) => {
20 error       140 |     acc[method] = genProxy(method);
20 error       141 |     return acc;
20 error       142 |   }, {});
20 error
20 error       at wrapHooks (../../../WrappedPlugin/index.js:139:17)
20 error       at Object.get (../../../WrappedPlugin/index.js:201:18)
20 error       at Object.<anonymous>.exports.register (node_modules/hard-source-webpack-plugin/lib/util/plugin-compat.js:34:15)
20 error       at new LoggerFactory (node_modules/hard-source-webpack-plugin/lib/logger-factory.js:191:16)
20 error       at HardSourceWebpackPlugin.Object.<anonymous>.HardSourceWebpackPlugin.apply (node_modules/hard-source-webpack-plugin/index.js:161:16)
20 error       at WrappedPlugin.apply (../../../WrappedPlugin/index.js:260:29)
20 error       at Compiler.apply (node_modules/webpack/node_modules/tapable/lib/Tapable.js:375:16)
20 error       at webpack (node_modules/webpack/lib/webpack.js:33:19)
20 error       at Promise (smp.test.js:17:5)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should state the time taken overall
20 error
20 error     expect(string)[.not].toMatch(expected)
20 error
20 error     string value must be a string.
20 error     Received: undefined
20 error
20 error       51 |
20 error       52 |     it("should state the time taken overall", () => {
20 error     > 53 |       expect(smpOutput).toMatch(
20 error       54 |         /General output time took .*([0-9]+ mins? )?[0-9]+(\.[0-9]+)? secs/
20 error       55 |       );
20 error       56 |     });
20 error
20 error       at Object.it (smp.test.js:53:25)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should state the time taken by the plugins
20 error
20 error     TypeError: Cannot convert undefined or null to object
20 error         at Function.keys (<anonymous>)
20 error
20 error       137 |   };
20 error       138 |
20 error     > 139 |   return Object.keys(hooks).reduce((acc, method) => {
20 error       140 |     acc[method] = genProxy(method);
20 error       141 |     return acc;
20 error       142 |   }, {});
20 error
20 error       at wrapHooks (../../../WrappedPlugin/index.js:139:17)
20 error       at Object.get (../../../WrappedPlugin/index.js:201:18)
20 error       at Object.<anonymous>.exports.register (node_modules/hard-source-webpack-plugin/lib/util/plugin-compat.js:34:15)
20 error       at new LoggerFactory (node_modules/hard-source-webpack-plugin/lib/logger-factory.js:191:16)
20 error       at HardSourceWebpackPlugin.Object.<anonymous>.HardSourceWebpackPlugin.apply (node_modules/hard-source-webpack-plugin/index.js:161:16)
20 error       at WrappedPlugin.apply (../../../WrappedPlugin/index.js:260:29)
20 error       at Compiler.apply (node_modules/webpack/node_modules/tapable/lib/Tapable.js:375:16)
20 error       at webpack (node_modules/webpack/lib/webpack.js:33:19)
20 error       at Promise (smp.test.js:17:5)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should state the time taken by the plugins
20 error
20 error     expect(string)[.not].toMatch(expected)
20 error
20 error     string value must be a string.
20 error     Received: undefined
20 error
20 error       57 |
20 error       58 |     it("should state the time taken by the plugins", () => {
20 error     > 59 |       expect(smpOutput).toMatch(
20 error       60 |         /DefinePlugin.* took .*([0-9]+ mins? )?[0-9]+(\.[0-9]+)? secs/
20 error       61 |       );
20 error       62 |     });
20 error
20 error       at Object.it (smp.test.js:59:25)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should state the time taken by the loaders
20 error
20 error     TypeError: Cannot convert undefined or null to object
20 error         at Function.keys (<anonymous>)
20 error
20 error       137 |   };
20 error       138 |
20 error     > 139 |   return Object.keys(hooks).reduce((acc, method) => {
20 error       140 |     acc[method] = genProxy(method);
20 error       141 |     return acc;
20 error       142 |   }, {});
20 error
20 error       at wrapHooks (../../../WrappedPlugin/index.js:139:17)
20 error       at Object.get (../../../WrappedPlugin/index.js:201:18)
20 error       at Object.<anonymous>.exports.register (node_modules/hard-source-webpack-plugin/lib/util/plugin-compat.js:34:15)
20 error       at new LoggerFactory (node_modules/hard-source-webpack-plugin/lib/logger-factory.js:191:16)
20 error       at HardSourceWebpackPlugin.Object.<anonymous>.HardSourceWebpackPlugin.apply (node_modules/hard-source-webpack-plugin/index.js:161:16)
20 error       at WrappedPlugin.apply (../../../WrappedPlugin/index.js:260:29)
20 error       at Compiler.apply (node_modules/webpack/node_modules/tapable/lib/Tapable.js:375:16)
20 error       at webpack (node_modules/webpack/lib/webpack.js:33:19)
20 error       at Promise (smp.test.js:17:5)
20 error
20 error   ● smp - v3-hard-source-webpack-plugin › vanilla config › should state the time taken by the loaders
20 error
20 error     expect(string)[.not].toMatch(expected)
20 error
20 error     string value must be a string.
20 error     Received: undefined
20 error
20 error       63 |
20 error       64 |     it("should state the time taken by the loaders", () => {
20 error     > 65 |       expect(smpOutput).toMatch(
20 error       66 |         /babel-loader.* took .*([0-9]+ mins? )?[0-9]+(\.[0-9]+)? secs.*\n\s+module count\s+= [0-9]+/
20 error       67 |       );
20 error       68 |     });
20 error
20 error       at Object.it (smp.test.js:65:25)
20 error
20 error Test Suites: 1 failed, 1 total
20 error Tests:       5 failed, 5 total
20 error Snapshots:   0 total
20 error Time:        4.906s, estimated 6s
20 error Ran all test suites matching /.\/smp.test.js/i.
20 error npm ERR! code ELIFECYCLE
20 error npm ERR! errno 1
20 error npm ERR! v3-hard-source-webpack-plugin@0.0.1 test: `jest ./smp.test.js`
20 error npm ERR! Exit status 1
20 error npm ERR!
20 error npm ERR! Failed at the v3-hard-source-webpack-plugin@0.0.1 test script.
20 error npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
20 error
20 error npm ERR! A complete log of this run can be found in:
20 error npm ERR!     /home/stephen/.npm/_logs/2018-03-25T11_32_30_690Z-debug.log
20 error
20 error > v3-hard-source-webpack-plugin@0.0.1 test /home/stephen/workspace/speed-measure-webpack-plugin/__tests__/setups/v3-hard-source-webpack-plugin
20 error > jest ./smp.test.js
20 error
20 error   console.warn node_modules/hard-source-webpack-plugin/lib/logger-factory.js:98
20 error     [hard-source:core] HardSourceWebpackPlugin is writing to a new confighash path for the first time: /home/stephen/workspace/speed-measure-webpack-plugin/__tests__/setups/v3-hard-source-webpack-plugin/node_modules/.cache/hard-source/3d669ca77289b45af86342784bdf772552b9698b2faaa1267d9cf29f4e661d1f
20 error
20 error
20 error     at Promise.all.then.arr (/home/stephen/workspace/speed-measure-webpack-plugin/node_modules/lerna/node_modules/execa/index.js:236:11)
20 error     at <anonymous>
